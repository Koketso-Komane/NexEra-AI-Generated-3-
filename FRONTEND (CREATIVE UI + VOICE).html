<!DOCTYPE html>
<html>
<head>
<title>NexEra AI Learning Lab</title>

<style>
body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#1a1f2b,#0b0e14);
color:white;
}
header{
padding:20px;
text-align:center;
font-size:26px;
font-weight:bold;
}
.grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
padding:20px;
}
.card{
background:rgba(255,255,255,0.06);
border-radius:16px;
padding:20px;
backdrop-filter:blur(15px);
}
input,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:none;
}
button{
background:linear-gradient(135deg,#6e8cff,#8fd3f4);
font-weight:bold;
cursor:pointer;
}
canvas{
width:100%;
height:300px;
margin-top:15px;
border-radius:12px;
}
.ai{
margin-top:10px;
background:rgba(0,0,0,0.4);
padding:12px;
border-radius:10px;
font-size:13px;
}
img{
max-width:100%;
margin-top:10px;
border-radius:10px;
}
</style>
</head>

<body>

<header>NexEra Â· AI Interactive Training Prototype</header>

<div class="grid">

<!-- TEST 1 -->
<div class="card">
<h2>ðŸ§  Test 1 â€” AI â†’ 3D Learning Asset</h2>

<input id="t1Text" placeholder="Describe an object (e.g. yellow helmet)">
<input type="file" id="t1Image">

<img id="preview">

<button onclick="runTest1()">Generate</button>

<div class="ai" id="t1Reasoning">AI reasoning appears here</div>
<div class="ai" id="t1Education"></div>

<canvas id="viewer"></canvas>

<div class="ai">
<strong>Next Steps</strong><br>
â€¢ GPT-4 Vision integration<br>
â€¢ Sketchfab asset retrieval<br>
â€¢ Lesson storage per module
</div>
</div>

<!-- TEST 2 -->
<div class="card">
<h2>ðŸ¤– Test 2 â€” AI Avatar Trainer</h2>

<input id="command" placeholder="Wave hello">
<button onclick="runTest2()">Execute</button>
<button onclick="startVoice()">ðŸŽ¤ Voice Command</button>

<div class="ai" id="avatarText"></div>
<canvas id="avatar"></canvas>

<div class="ai">
<strong>Next Steps</strong><br>
â€¢ Mixamo animations<br>
â€¢ Voice narration<br>
â€¢ Scenario scripting
</div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155/examples/js/loaders/GLTFLoader.js"></script>

<script>
t1Image.onchange = e => preview.src = URL.createObjectURL(e.target.files[0]);

function runTest1(){
const data=new FormData();
data.append("text",t1Text.value);
data.append("image",t1Image.files[0]);

fetch("/api/test1",{method:"POST",body:data})
.then(r=>r.json())
.then(d=>{
t1Reasoning.innerText=d.reasoning;
t1Education.innerText=d.education;
loadObject(d.model);
});
}

function runTest2(){
fetch("/api/test2",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({command:command.value})
})
.then(r=>r.json())
.then(d=>{
avatarText.innerText=d.explanation;
playAvatar(d.action);
});
}

// ðŸŽ¤ VOICE INPUT
function startVoice(){
const rec=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
rec.lang="en-US";
rec.onresult=e=>{
command.value=e.results[0][0].transcript;
runTest2();
};
rec.start();
}
</script>

<script src="/static/test1.js"></script>
<script src="/static/test2.js"></script>

</body>
</html>
